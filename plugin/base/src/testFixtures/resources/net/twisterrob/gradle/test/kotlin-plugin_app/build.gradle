//file:noinspection GrPackage suppress because whole file is highlighted as warning.
buildscript {
	repositories {
		mavenCentral()
	}
	dependencies {
		classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:@net.twisterrob.test.kotlin.pluginVersion@")
		def gradleVersion = project.gradle.gradleVersion
		// Note: .toString on GStrings are necessary because Groovy doesn't auto-convert it.
		def doNotNagAbout = rootProject.ext["doNotNagAbout"]
		if ("@net.twisterrob.test.kotlin.pluginVersion@" < "1.6.0") {
			// https://youtrack.jetbrains.com/issue/KT-47867 was fixed in 1.6.0,
			// so disable these warnings for anything that uses Kotlin < 1.6.
			doNotNagAbout(
					"7.6",
					/^.*$/,
					"IncrementalTaskInputs has been deprecated. This is scheduled to be removed in Gradle 8.0. On method 'KaptWithoutKotlincTask.compile' use 'org.gradle.work.InputChanges' instead. Consult the upgrading guide for further information: https://docs.gradle.org/${gradleVersion}/userguide/upgrading_version_7.html#incremental_task_inputs_deprecation".toString()
			)
			doNotNagAbout(
					"7.6",
					/^.*$/,
					"IncrementalTaskInputs has been deprecated. This is scheduled to be removed in Gradle 8.0. On method 'AbstractKotlinCompile.execute' use 'org.gradle.work.InputChanges' instead. Consult the upgrading guide for further information: https://docs.gradle.org/${gradleVersion}/userguide/upgrading_version_7.html#incremental_task_inputs_deprecation".toString()
			)
		}
		if ("@net.twisterrob.test.kotlin.pluginVersion@" < "1.7.0") {
			// https://youtrack.jetbrains.com/issue/KT-32805#focus=Comments-27-5915479.0-0 was fixed in 1.7.0.
			// > Task :kaptGenerateStubsDebugKotlin
			// > Task :kaptGenerateStubsDebugUnitTestKotlin
			doNotNagAbout(
					"8.0",
					/^.*$/,
					"The AbstractCompile.destinationDir property has been deprecated. This is scheduled to be removed in Gradle 9.0. Please use the destinationDirectory property instead. Consult the upgrading guide for further information: https://docs.gradle.org/${gradleVersion}/userguide/upgrading_version_7.html#compile_task_wiring".toString()
			)
		}
	}
}
