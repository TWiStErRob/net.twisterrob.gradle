buildscript {
	repositories {
		mavenCentral()
	}
	dependencies {
		// See GradlePluginUtils.kt > pluginList: AGP 7.3 requires Kotlin 1.5.20+.
		if ("@net.twisterrob.test.android.pluginVersion@" >= "7.3.0") {
			// 1.5.32 would be enough, but have to jump further forward because:
			// org.jetbrains.kotlin.gradle.internal.kapt.KaptWithoutKotlincTask.kotlinStdlibClasspath is eagerly initialized.
			// jarSearchingUtil.kt > findPotentialModuleJars uses a HashSet
			// Sometimes (e.g. always on CI, not on Window locally) the hash ordering prefers
			// classpath files('.../plugin/languages/build/classes/java/main')
			// over
			// classpath files('.../kotlin-stdlib-1.5.32.jar')
			// and jarSearchingUtil.kt > hasEntry assumes that all "files" are .jar.
			classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.21")
		} else {
			classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:1.4.32")
			def doNotNagAbout = rootProject.ext["doNotNagAbout"]
			// https://youtrack.jetbrains.com/issue/KT-47867 was fixed in 1.6.0,
			// so disable these warnings for anything that uses Kotlin < 1.6.
			doNotNagAbout(
					"7.5.1",
					/^.*$/,
					"IncrementalTaskInputs has been deprecated. This is scheduled to be removed in Gradle 8.0. On method 'KaptWithoutKotlincTask.compile' use 'org.gradle.work.InputChanges' instead. Consult the upgrading guide for further information: https://docs.gradle.org/7.5.1/userguide/upgrading_version_7.html#incremental_task_inputs_deprecation"
			)
			doNotNagAbout(
					"7.5.1",
					/^.*$/,
					"IncrementalTaskInputs has been deprecated. This is scheduled to be removed in Gradle 8.0. On method 'AbstractKotlinCompile.execute' use 'org.gradle.work.InputChanges' instead. Consult the upgrading guide for further information: https://docs.gradle.org/7.5.1/userguide/upgrading_version_7.html#incremental_task_inputs_deprecation"
			)
		}
	}
}
